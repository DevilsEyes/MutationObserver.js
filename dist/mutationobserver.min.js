/*!
* MutationObserver-Shim v0.1.0 (http://github.com/megawac/MutationObserver.js)
* Authors: Graeme Yeates (yeatesgraeme@gmail.com) 
* Use, redistribute and modify as desired. Released under WTFPL v2 2004.
*/
!function(a){"use strict";var b=a.MutationObserver=a.MutationObserver||a.WebKitMutationObserver;if(!b){var c=Array.prototype,d=c.push,e=c.indexOf,f=c.map,g=function(a,b){return"undefined"!=typeof a[b]},h=function(a,b){for(var c in a)"undefined"!=typeof a[c]&&b(a[c],c,a)},i=function(a,b,c){for(var d=~~c,e=a.length;e>d;d++)if(b(a[d]))return d;return-1},j="childList",k="attributes",l="mo_id",m=a.MutationRecord=function(a){var b={target:null,type:null,addedNodes:[],removedNodes:[],attributeName:null,oldValue:null};return h(a,function(a,c){b[c]=a}),b},n=function(a,b){for(var c,d={},e=a.attributes,f=0,h=e.length;h>f;f++)c=e[f],(!b||g(b,c.name))&&(d[c.name]=c.value);return d},o=1,p=function(a){return a.id||(a[l]=a[l]||++o)},q=function(a,b){var c=function(a,d){return{node:a,kids:d||b?f.call(a.childNodes,function(a){return c(a)}):null}};return c(a,!0)},r=function(a,b,c){var d=[],f=function(a){d.push(m({type:j,target:a.parentElement,addedNodes:[a]}))},h=function(a,b){d.push(m({type:j,target:b,removedNodes:[a]}))},k=function(a,b){var d=a.childNodes,j=b.kids,l=d.length,m=j.length;if(m||l){for(var n,o,q,r,s={},t=[],u=function(){var a=t.length-1,e=-~(a/2);t.forEach(function(g){e&&Math.abs(g.i-g.j)>=a?(f(d[g.i]),h(d[g.i],b.node),e--):c&&k(d[g.i],j[g.j])}),t=[]},v=0,w=0;l>v||m>w;)if(q=d[v],r=m>w&&j[w].node,q===r)c&&k(q,j[w]),t.length&&u(),v++,w++;else if(q&&(n=p(q),g(s,n)||(-1===(o=i(j,function(a){return a.node===q},w))?f(q):(s[n]=!0,t.push({i:v,j:o}))),v++),r){if(n=p(r),!g(s,n))if(-1===(o=e.call(d,r,v)))h(r,b.node);else{if(0===o)continue;s[n]=!0,t.push({i:o,j:w})}w++}t.length&&u()}};return k(a,b),d},s={attributes:function(a,b){b=b&&b.reduce?b.reduce(function(a,b){return a[b]=!0,a},{}):null;var c=n(a,b);return function(){var d=[],e=n(a,b);return h(e,function(b,e){c[e]!==b&&d.push(m({target:a,type:k,attributeName:e,oldValue:c[e]})),delete c[e]}),h(c,function(b,c){d.push(m({target:a,type:k,attributeName:c,oldValue:b}))}),c=e,d}},childList:function(a,b){b=b===s;var c=q(a,b);return function(){var d=r(a,c,b);return d.length&&(c=q(a,b)),d}}};b=a.MutationObserver=function(a){var b=this;b._watched=[],b._checker=function(){var c=b.takeRecords();c.length&&a.call(b,c,b)}},b._period=40,b.prototype={observe:function(a,c){var d,e=this;(c.attributeFilter||c.attributeOldValue)&&(c[k]=c.attributeFilter||!0),c.subtree&&(c[j]=s),h(c,function(b,c){b&&g(s,c)&&(d=s[c].call(e,a,b),d&&e._watched.push(d))}),e._interval||(this._interval=setInterval(this._checker,b._period))},takeRecords:function(){for(var a,b=[],c=this._watched,e=0,f=c.length;f>e;e++)a=c[e](),a.length&&d.apply(b,a);return b},disconnect:function(){this._watched=[],clearInterval(this._interval),this._interval=null}}}}(window);